/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * ğŸ“š TEMPLATES LIBRARY v5.0 - Template Import & Conversion Utility
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *
 * ğŸ¯ ĞĞĞ—ĞĞĞ§Ğ•ĞĞ˜Ğ•:
 * Ğ­Ñ‚Ğ¾Ñ‚ Ñ„Ğ°Ğ¹Ğ» ĞĞ• Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ Ğ² n8n workflows.
 * ĞĞ½ ÑĞ»ÑƒĞ¶Ğ¸Ñ‚ ĞºĞ°Ğº ÑƒÑ‚Ğ¸Ğ»Ğ¸Ñ‚Ğ° Ğ´Ğ»Ñ Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ° Ğ¸ ĞºĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ°Ñ†Ğ¸Ğ¸ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¾Ğ² Ğ¸Ğ· templates-definitions.js
 * Ğ² Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚, ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ñ‹Ğ¹ Ñ legacy API Ğ¸Ğ»Ğ¸ Ğ´Ñ€ÑƒĞ³Ğ¸Ğ¼Ğ¸ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°Ğ¼Ğ¸.
 *
 * ğŸ“ Ğ˜Ğ¡Ğ¢ĞĞ§ĞĞ˜Ğš Ğ”ĞĞĞĞ«Ğ¥:
 * Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ‹ Ğ¸Ğ· templates-definitions.js (60 ÑƒĞ½Ğ¸Ğ²ĞµÑ€ÑĞ°Ğ»ÑŒĞ½Ñ‹Ñ… ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¾Ğ²)
 *
 * ğŸ”§ Ğ¤Ğ£ĞĞšĞ¦Ğ˜ĞĞĞĞ›Ğ¬ĞĞĞ¡Ğ¢Ğ¬:
 * 1. Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ VIDEO_TEMPLATES Ğ¸Ğ· templates-definitions.js
 * 2. ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ°Ñ†Ğ¸Ñ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ° ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¾Ğ² (ĞµÑĞ»Ğ¸ Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ)
 * 3. Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ğ² Ğ½ÑƒĞ¶Ğ½Ğ¾Ğ¼ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ Ğ´Ğ»Ñ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ñ… ÑĞ¸ÑÑ‚ĞµĞ¼
 *
 * âš ï¸ Ğ’ĞĞ–ĞĞ:
 * - Ğ”Ğ»Ñ n8n workflows Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ templates-definitions.js Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ
 * - Ğ­Ñ‚Ğ¾Ñ‚ Ñ„Ğ°Ğ¹Ğ» Ğ½ÑƒĞ¶ĞµĞ½ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ñ Ğ´Ñ€ÑƒĞ³Ğ¸Ğ¼Ğ¸ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°Ğ¼Ğ¸
 * - Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ ÑƒÑ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹ Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ°Ğ¼Ğ¸ (Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ, Ğ¿Ğ¾Ğ¸ÑĞº, ĞºĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ°Ñ†Ğ¸Ñ)
 *
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */

// Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¾Ğ² Ğ¸Ğ· templates-definitions.js
const { VIDEO_TEMPLATES } = require('./templates-definitions.js');

/**
 * ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¾Ğ² Ğ¸Ğ· templates-definitions.js Ğ² legacy Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚
 * (ĞµÑĞ»Ğ¸ Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ Ğ´Ğ»Ñ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ñ legacy API)
 *
 * @param {Object} templates - ĞĞ±ÑŠĞµĞºÑ‚ VIDEO_TEMPLATES
 * @returns {Object} ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ‹
 */
function convertToLegacyFormat(templates) {
	const converted = {};

	for (const [key, template] of Object.entries(templates)) {
		converted[key] = {
			name: template.name,
			category: template.category,
			best_for: template.best_for,
			title: {
				// ĞŸĞµÑ€ĞµĞ¸Ğ¼ĞµĞ½Ğ¾Ğ²Ñ‹Ğ²Ğ°ĞµĞ¼ fontfile -> font ĞµÑĞ»Ğ¸ Ğ½ÑƒĞ¶Ğ½Ğ¾
				font: template.title.fontfile,
				fontsize: template.title.fontsize,
				fontcolor: template.title.fontcolor,
				bordercolor: template.title.bordercolor,
				borderw: template.title.borderw,
				x: template.title.x,
				y: template.title.y,
				box: template.title.box,
				boxcolor: template.title.boxcolor,
				boxborderw: template.title.boxborderw,
				max_lines: template.title.max_lines
			},
			sub: {
				font: template.sub.fontfile,
				fontsize: template.sub.fontsize,
				fontcolor: template.sub.fontcolor,
				bordercolor: template.sub.bordercolor,
				borderw: template.sub.borderw,
				x: template.sub.x,
				y: template.sub.y,
				box: template.sub.box,
				boxcolor: template.sub.boxcolor,
				boxborderw: template.sub.boxborderw,
				max_lines: template.sub.max_lines
			}
		};
	}

	return converted;
}

/**
 * Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ÑƒĞµÑ‚ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ‹ Ğ¿Ğ¾ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸
 *
 * @param {string} category - ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸ (NEON_GLOW, SOLID_FRAMES, etc.)
 * @returns {Object} ĞÑ‚Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ‹
 */
function filterByCategory(category) {
	const filtered = {};
	for (const [key, template] of Object.entries(VIDEO_TEMPLATES)) {
		if (template.category === category) {
			filtered[key] = template;
		}
	}
	return filtered;
}

/**
 * Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ÑƒĞµÑ‚ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ‹ Ğ¿Ğ¾ Ñ‚ĞµĞ³Ñƒ best_for
 *
 * @param {string} tag - Ğ¢ĞµĞ³ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, "Minecraft", "horror", "fps")
 * @returns {Object} ĞÑ‚Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ‹
 */
function filterByTag(tag) {
	const filtered = {};
	for (const [key, template] of Object.entries(VIDEO_TEMPLATES)) {
		if (template.best_for.includes(tag)) {
			filtered[key] = template;
		}
	}
	return filtered;
}

/**
 * Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ Ğ¿Ğ¾ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ°Ğ¼
 *
 * @returns {Object} Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°
 */
function getTemplateStats() {
	const stats = {
		total: Object.keys(VIDEO_TEMPLATES).length,
		categories: {},
		tags: new Set()
	};

	for (const template of Object.values(VIDEO_TEMPLATES)) {
		// ĞŸĞ¾Ğ´ÑÑ‡Ñ‘Ñ‚ Ğ¿Ğ¾ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸ÑĞ¼
		if (!stats.categories[template.category]) {
			stats.categories[template.category] = 0;
		}
		stats.categories[template.category]++;

		// Ğ¡Ğ±Ğ¾Ñ€ Ğ²ÑĞµÑ… Ñ‚ĞµĞ³Ğ¾Ğ²
		for (const tag of template.best_for) {
			stats.tags.add(tag);
		}
	}

	stats.tags = Array.from(stats.tags).sort();

	return stats;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Ğ­ĞšĞ¡ĞŸĞĞ Ğ¢
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

module.exports = {
	// ĞÑ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ‹ Ğ¸Ğ· templates-definitions.js
	VIDEO_TEMPLATES,

	// Legacy Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ (Ğ´Ğ»Ñ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ ÑĞ¾ ÑÑ‚Ğ°Ñ€Ñ‹Ğ¼Ğ¸ API)
	GAMING_TEMPLATES: VIDEO_TEMPLATES, // Alias Ğ´Ğ»Ñ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾Ğ¹ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸

	// Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹
	convertToLegacyFormat,
	filterByCategory,
	filterByTag,
	getTemplateStats
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ĞŸĞ Ğ˜ĞœĞ•Ğ  Ğ˜Ğ¡ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞĞ˜Ğ¯
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/*
// Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ Ğ²ÑĞµÑ… ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¾Ğ²
const { VIDEO_TEMPLATES } = require('./templates-library.js');

// Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸
const { filterByCategory } = require('./templates-library.js');
const neonTemplates = filterByCategory('NEON_GLOW');

// Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ñ‚ĞµĞ³Ñƒ
const { filterByTag } = require('./templates-library.js');
const minecraftTemplates = filterByTag('Minecraft');

// Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°
const { getTemplateStats } = require('./templates-library.js');
const stats = getTemplateStats();
console.log(`Total templates: ${stats.total}`);
console.log(`Categories: ${Object.keys(stats.categories).join(', ')}`);
console.log(`Total tags: ${stats.tags.length}`);
*/
