// ðŸŽ® Gaming Templates v4.0 - ÐÐžÐ’ÐÐ¯ Ð²ÐµÑ€ÑÐ¸Ñ Ñ Ñ€Ð°Ð·Ð±Ð¾Ñ€Ð¾Ð¼ Title
// ÐŸÐ ÐÐ’Ð˜Ð›Ð¬ÐÐ«Ð™ Ð¤ÐžÐ ÐœÐÐ¢: ÐºÐ°Ð¶Ð´Ñ‹Ð¹ ÑÑƒÐ±Ñ‚Ð¸Ñ‚Ñ€ = Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ text_item
// (ÐÐ• Ð²Ð»Ð¾Ð¶ÐµÐ½Ð½Ñ‹Ð¹ subtitles.items, Ð° Ñ€Ð°Ð·Ð²Ñ‘Ñ€Ð½ÑƒÑ‚Ñ‹Ð¹ Ð¼Ð°ÑÑÐ¸Ð²)
// 
// Ð ÐÐ—ÐÐ˜Ð¦Ð ÐžÐ¢ LEGACY:
// - Title Ñ€Ð°Ð·Ð±Ð¸Ð²Ð°ÐµÑ‚ÑÑ Ð½Ð° Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð°Ñ‚Ð¾Ð¼Ñ‹ (ÐµÑÐ»Ð¸ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ ÑÑ‚Ñ€Ð¾Ðº)
// - ÐšÐ°Ð¶Ð´Ñ‹Ð¹ atom ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑÑ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¼ text_item
// - Ð˜Ð´ÐµÐ°Ð»ÑŒÐ½Ð¾ Ð´Ð»Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð¼Ð½Ð¾Ð³Ð¾ÑƒÑ€Ð¾Ð²Ð½ÐµÐ²Ñ‹Ñ… Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ¾Ð²
//
// Ð”Ð»Ñ ÑÑ‚Ð°Ñ€Ð¾Ð³Ð¾ Ð¿Ð¾Ð²ÐµÐ´ÐµÐ½Ð¸Ñ (Title ÐºÐ°Ðº ÐµÑÑ‚ÑŒ) Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ: workflow-code-v4-LEGACY.js

// âœ… Ð”ÐžÐ¡Ð¢Ð£ÐŸÐÐ«Ð• Ð¨Ð Ð˜Ð¤Ð¢Ð« Ð’ ÐŸÐ£Ð‘Ð›Ð˜Ð§ÐÐžÐ™ Ð’Ð•Ð Ð¡Ð˜Ð˜ (10 ÑˆÑ‚ÑƒÐº):
// 1. Charter.ttc - Modern Serif
// 2. Copperplate.ttc - Ð”ÐµÐºÐ¾Ñ€Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ð¹ ÑÑ‚Ð¸Ð»ÑŒ
// 3. HelveticaNeue.ttc - Premium Sans-Serif
// 4. LucidaGrande.ttc - Ð­Ð»ÐµÐ³Ð°Ð½Ñ‚Ð½Ñ‹Ð¹ Sans-Serif
// 5. MarkerFelt.ttc - ÐšÑ€ÐµÐ°Ñ‚Ð¸Ð²Ð½Ñ‹Ð¹ ÑÑ‚Ð¸Ð»ÑŒ
// 6. Menlo.ttc - Monospace
// 7. Monaco.ttf - Monospace
// 8. PTSans.ttc - Ð ÑƒÑÑÐºÐ¸Ð¹ ÑˆÑ€Ð¸Ñ„Ñ‚
// 9. Palatino.ttc - ÐšÐ»Ð°ÑÑÐ¸Ñ‡ÐµÑÐºÐ¸Ð¹ Serif
// 10. STIXTwoText-Italic.ttf - ÐÐ°ÑƒÑ‡Ð½Ñ‹Ð¹ (Math)

const GAMING_TEMPLATES = {
	// GAMING_CONTRAST (10) - Ð’Ñ‹ÑÐ¾ÐºÐ¾ÐºÐ¾Ð½Ñ‚Ñ€Ð°ÑÑ‚Ð½Ñ‹Ðµ Ñ†Ð²ÐµÑ‚Ð¾Ð²Ñ‹Ðµ ÑÑ…ÐµÐ¼Ñ‹
	"cyber_neon": {
		name: "Cyber Neon",
		category: "GAMING_CONTRAST",
		best_for: ["cyberpunk", "tech", "sci-fi"],
		title: {
			fontfile: "HelveticaNeue.ttc",
			fontsize: 85,
			fontcolor: "#00FFFF", // Ð¯Ñ€ÐºÐ¸Ð¹ Ñ†Ð¸Ð°Ð½
			x: "(w-text_w)/2",
			y: 200,
			box: 1,
			boxcolor: "#000033@0.92", // Ð¢ÐµÐ¼Ð½Ð¾-ÑÐ¸Ð½Ð¸Ð¹ Ñ„Ð¾Ð½
			boxborderw: 32
		},
		sub: {
			fontfile: "PTSans.ttc",
			fontsize: 75,
			fontcolor: "#FF00FF", // Ð¯Ñ€ÐºÐ°Ñ Ñ„ÑƒÐºÑÐ¸Ñ
			x: "(w-text_w)/2",
			y: "h-330",
			box: 0
		}
	},

	"fire_ice": {
		name: "Fire & Ice",
		category: "GAMING_CONTRAST",
		best_for: ["action", "battle", "pvp"],
		title: {
			fontfile: "HelveticaNeue.ttc",
			fontsize: 87,
			fontcolor: "#FF3300", // ÐžÐ³Ð½ÐµÐ½Ð½Ð¾-ÐºÑ€Ð°ÑÐ½Ñ‹Ð¹
			x: "(w-text_w)/2",
			y: 195,
			box: 1,
			boxcolor: "#1a0000@0.94", // ÐŸÐ¾Ñ‡Ñ‚Ð¸ Ñ‡ÐµÑ€Ð½Ñ‹Ð¹ Ñ ÐºÑ€Ð°ÑÐ½Ñ‹Ð¼ Ð¾Ñ‚Ñ‚ÐµÐ½ÐºÐ¾Ð¼
			boxborderw: 34
		},
		sub: {
			fontfile: "LucidaGrande.ttc",
			fontsize: 77,
			fontcolor: "#00DDFF", // Ð›ÐµÐ´ÑÐ½Ð¾Ð¹ Ñ†Ð¸Ð°Ð½
			x: "(w-text_w)/2",
			y: "h-330",
			box: 0
		}
	},

	"gold_purple": {
		name: "Gold & Purple",
		category: "GAMING_CONTRAST",
		best_for: ["rpg", "fantasy", "magic"],
		title: {
			fontfile: "Palatino.ttc",
			fontsize: 83,
			fontcolor: "#FFD700", // Ð—Ð¾Ð»Ð¾Ñ‚Ð¾Ð¹
			x: "(w-text_w)/2",
			y: 205,
			box: 1,
			boxcolor: "#2d1b52@0.92", // Ð¢ÐµÐ¼Ð½Ð¾-Ñ„Ð¸Ð¾Ð»ÐµÑ‚Ð¾Ð²Ñ‹Ð¹
			boxborderw: 30
		},
		sub: {
			fontfile: "PTSans.ttc",
			fontsize: 74,
			fontcolor: "#BB88FF", // Ð¡Ð²ÐµÑ‚Ð»Ð¾-Ñ„Ð¸Ð¾Ð»ÐµÑ‚Ð¾Ð²Ñ‹Ð¹
			x: "(w-text_w)/2",
			y: "h-330",
			box: 0
		}
	},

	"toxic_green": {
		name: "Toxic Green",
		category: "GAMING_CONTRAST",
		best_for: ["horror", "zombie", "survival"],
		title: {
			fontfile: "HelveticaNeue.ttc",
			fontsize: 86,
			fontcolor: "#39FF14", // ÐÐµÐ¾Ð½Ð¾Ð²Ð¾-Ð·ÐµÐ»ÐµÐ½Ñ‹Ð¹
			x: "(w-text_w)/2",
			y: 198,
			box: 1,
			boxcolor: "#001100@0.95", // Ð¢ÐµÐ¼Ð½Ð¾-Ð·ÐµÐ»ÐµÐ½Ñ‹Ð¹ Ð¿Ð¾Ñ‡Ñ‚Ð¸ Ñ‡ÐµÑ€Ð½Ñ‹Ð¹
			boxborderw: 33
		},
		sub: {
			fontfile: "LucidaGrande.ttc",
			fontsize: 76,
			fontcolor: "#FF0033", // Ð¯Ñ€ÐºÐ¾-ÐºÑ€Ð°ÑÐ½Ñ‹Ð¹
			x: "(w-text_w)/2",
			y: "h-330",
			box: 0
		}
	},

	"electric_yellow": {
		name: "Electric Yellow",
		category: "GAMING_CONTRAST",
		best_for: ["racing", "speed", "energy"],
		title: {
			fontfile: "HelveticaNeue.ttc",
			fontsize: 86,
			fontcolor: "#FFFF00", // Ð­Ð»ÐµÐºÑ‚Ñ€Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð¶ÐµÐ»Ñ‚Ñ‹Ð¹
			x: "(w-text_w)/2",
			y: 197,
			box: 1,
			boxcolor: "#000000@0.94", // Ð§ÐµÑ€Ð½Ñ‹Ð¹
			boxborderw: 32
		},
		sub: {
			fontfile: "PTSans.ttc",
			fontsize: 76,
			fontcolor: "#0088FF", // Ð¯Ñ€ÐºÐ¾-ÑÐ¸Ð½Ð¸Ð¹
			x: "(w-text_w)/2",
			y: "h-330",
			box: 0
		}
	},

	"blood_shadow": {
		name: "Blood Shadow",
		category: "GAMING_CONTRAST",
		best_for: ["dark", "vampire", "gothic"],
		title: {
			fontfile: "Palatino.ttc",
			fontsize: 84,
			fontcolor: "#CC0000", // ÐšÑ€Ð¾Ð²Ð°Ð²Ð¾-ÐºÑ€Ð°ÑÐ½Ñ‹Ð¹
			x: "(w-text_w)/2",
			y: 202,
			box: 1,
			boxcolor: "#0d0d0d@0.96", // ÐŸÐ¾Ñ‡Ñ‚Ð¸ Ñ‡ÐµÑ€Ð½Ñ‹Ð¹
			boxborderw: 31
		},
		sub: {
			fontfile: "LucidaGrande.ttc",
			fontsize: 74,
			fontcolor: "#DDDDDD", // Ð¡Ð²ÐµÑ‚Ð»Ð¾-ÑÐµÑ€Ñ‹Ð¹
			x: "(w-text_w)/2",
			y: "h-330",
			box: 0
		}
	},

	"matrix_code": {
		name: "Matrix Code",
		category: "GAMING_CONTRAST",
		best_for: ["hacking", "cyber", "matrix"],
		title: {
			fontfile: "Monaco.ttf",
			fontsize: 85,
			fontcolor: "#00FF41", // Matrix Ð·ÐµÐ»ÐµÐ½Ñ‹Ð¹
			x: "(w-text_w)/2",
			y: 200,
			box: 1,
			boxcolor: "#001a00@0.94", // Ð¢ÐµÐ¼Ð½Ð¾-Ð·ÐµÐ»ÐµÐ½Ñ‹Ð¹
			boxborderw: 32
		},
		sub: {
			fontfile: "Menlo.ttc",
			fontsize: 75,
			fontcolor: "#00FFFF", // Ð¦Ð¸Ð°Ð½
			x: "(w-text_w)/2",
			y: "h-330",
			box: 0
		}
	},

	"royal_blue": {
		name: "Royal Blue",
		category: "GAMING_CONTRAST",
		best_for: ["strategy", "empire", "rts"],
		title: {
			fontfile: "Palatino.ttc",
			fontsize: 83,
			fontcolor: "#0055FF", // ÐšÐ¾Ñ€Ð¾Ð»ÐµÐ²ÑÐºÐ¸Ð¹ ÑÐ¸Ð½Ð¸Ð¹
			x: "(w-text_w)/2",
			y: 205,
			box: 1,
			boxcolor: "#00001a@0.93", // Ð¢ÐµÐ¼Ð½Ð¾-ÑÐ¸Ð½Ð¸Ð¹
			boxborderw: 30
		},
		sub: {
			fontfile: "PTSans.ttc",
			fontsize: 74,
			fontcolor: "#FFD700", // Ð—Ð¾Ð»Ð¾Ñ‚Ð¾Ð¹
			x: "(w-text_w)/2",
			y: "h-330",
			box: 0
		}
	},

	"lava_glow": {
		name: "Lava Glow",
		category: "GAMING_CONTRAST",
		best_for: ["boss", "fire", "epic"],
		title: {
			fontfile: "HelveticaNeue.ttc",
			fontsize: 86,
			fontcolor: "#FF4400", // Ð›Ð°Ð²Ð¾Ð²Ñ‹Ð¹ Ð¾Ñ€Ð°Ð½Ð¶ÐµÐ²Ñ‹Ð¹
			x: "(w-text_w)/2",
			y: 197,
			box: 1,
			boxcolor: "#1a0600@0.94", // Ð¢ÐµÐ¼Ð½Ð¾-ÐºÑ€Ð°ÑÐ½Ñ‹Ð¹ Ð¿Ð¾Ñ‡Ñ‚Ð¸ Ñ‡ÐµÑ€Ð½Ñ‹Ð¹
			boxborderw: 33
		},
		sub: {
			fontfile: "LucidaGrande.ttc",
			fontsize: 76,
			fontcolor: "#00FFFF", // Ð¦Ð¸Ð°Ð½
			x: "(w-text_w)/2",
			y: "h-330",
			box: 0
		}
	},

	"cosmic_purple": {
		name: "Cosmic Purple",
		category: "GAMING_CONTRAST",
		best_for: ["space", "cosmic", "alien"],
		title: {
			fontfile: "HelveticaNeue.ttc",
			fontsize: 84,
			fontcolor: "#AA55FF", // ÐšÐ¾ÑÐ¼Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ñ„Ð¸Ð¾Ð»ÐµÑ‚Ð¾Ð²Ñ‹Ð¹
			x: "(w-text_w)/2",
			y: 203,
			box: 1,
			boxcolor: "#0d0d1a@0.93", // Ð¢ÐµÐ¼Ð½Ð¾-Ñ„Ð¸Ð¾Ð»ÐµÑ‚Ð¾Ð²Ñ‹Ð¹
			boxborderw: 31
		},
		sub: {
			fontfile: "PTSans.ttc",
			fontsize: 75,
			fontcolor: "#00FF88", // ÐÐµÐ¾Ð½Ð¾Ð²Ð¾-Ð·ÐµÐ»ÐµÐ½Ñ‹Ð¹
			x: "(w-text_w)/2",
			y: "h-330",
			box: 0
		}
	},

	// DOUBLE_BOX (10) - ÐžÐ±Ð° Ñ‚ÐµÐºÑÑ‚Ð° Ñ Ñ„Ð¾Ð½Ð¾Ð¼
	"double_neon": {
		name: "Double Neon",
		category: "DOUBLE_BOX",
		best_for: ["important", "tutorial", "guide"],
		title: {
			fontfile: "HelveticaNeue.ttc",
			fontsize: 82,
			fontcolor: "#00FFFF",
			x: "(w-text_w)/2",
			y: 207,
			box: 1,
			boxcolor: "#001a1a@0.93",
			boxborderw: 30
		},
		sub: {
			fontfile: "PTSans.ttc",
			fontsize: 72,
			fontcolor: "#FFD700",
			x: "(w-text_w)/2",
			y: "h-330",
			box: 1,
			boxcolor: "#1a1a00@0.91",
			boxborderw: 28
		}
	},

	"double_impact": {
		name: "Double Impact",
		category: "DOUBLE_BOX",
		best_for: ["alert", "breaking", "news"],
		title: {
			fontfile: "HelveticaNeue.ttc",
			fontsize: 84,
			fontcolor: "white",
			x: "(w-text_w)/2",
			y: 202,
			box: 1,
			boxcolor: "#CC0000@0.95",
			boxborderw: 32
		},
		sub: {
			fontfile: "LucidaGrande.ttc",
			fontsize: 74,
			fontcolor: "#FFFF00",
			x: "(w-text_w)/2",
			y: "h-330",
			box: 1,
			boxcolor: "#000000@0.93",
			boxborderw: 30
		}
	},

	"double_elegant": {
		name: "Double Elegant",
		category: "DOUBLE_BOX",
		best_for: ["education", "story", "lore"],
		title: {
			fontfile: "Palatino.ttc",
			fontsize: 78,
			fontcolor: "#2C3E50",
			x: "(w-text_w)/2",
			y: 217,
			box: 1,
			boxcolor: "#ECF0F1@0.94",
			boxborderw: 30
		},
		sub: {
			fontfile: "Charter.ttc",
			fontsize: 70,
			fontcolor: "#5D6D7E",
			x: "(w-text_w)/2",
			y: "h-330",
			box: 1,
			boxcolor: "white@0.91",
			boxborderw: 28
		}
	},

	"double_toxic": {
		name: "Double Toxic",
		category: "DOUBLE_BOX",
		best_for: ["poison", "radioactive", "danger"],
		title: {
			fontfile: "HelveticaNeue.ttc",
			fontsize: 83,
			fontcolor: "#39FF14",
			x: "(w-text_w)/2",
			y: 204,
			box: 1,
			boxcolor: "#001100@0.94",
			boxborderw: 31
		},
		sub: {
			fontfile: "LucidaGrande.ttc",
			fontsize: 74,
			fontcolor: "#FF0033",
			x: "(w-text_w)/2",
			y: "h-330",
			box: 1,
			boxcolor: "#1a0000@0.92",
			boxborderw: 29
		}
	},

	"double_gold": {
		name: "Double Gold",
		category: "DOUBLE_BOX",
		best_for: ["achievement", "victory", "epic"],
		title: {
			fontfile: "Palatino.ttc",
			fontsize: 82,
			fontcolor: "#FFD700",
			x: "(w-text_w)/2",
			y: 207,
			box: 1,
			boxcolor: "#1a1a1a@0.93",
			boxborderw: 30
		},
		sub: {
			fontfile: "PTSans.ttc",
			fontsize: 73,
			fontcolor: "#F4E5C2",
			x: "(w-text_w)/2",
			y: "h-330",
			box: 1,
			boxcolor: "#2d2d2d@0.91",
			boxborderw: 28
		}
	},

	"double_cyber": {
		name: "Double Cyber",
		category: "DOUBLE_BOX",
		best_for: ["futuristic", "tech", "digital"],
		title: {
			fontfile: "Monaco.ttf",
			fontsize: 83,
			fontcolor: "#00FFFF",
			x: "(w-text_w)/2",
			y: 204,
			box: 1,
			boxcolor: "#001a1a@0.93",
			boxborderw: 31
		},
		sub: {
			fontfile: "Menlo.ttc",
			fontsize: 74,
			fontcolor: "#FF00FF",
			x: "(w-text_w)/2",
			y: "h-330",
			box: 1,
			boxcolor: "#1a001a@0.92",
			boxborderw: 29
		}
	},

	"double_fire": {
		name: "Double Fire",
		category: "DOUBLE_BOX",
		best_for: ["battle", "war", "intense"],
		title: {
			fontfile: "HelveticaNeue.ttc",
			fontsize: 84,
			fontcolor: "#FF4400",
			x: "(w-text_w)/2",
			y: 202,
			box: 1,
			boxcolor: "#8B0000@0.92",
			boxborderw: 32
		},
		sub: {
			fontfile: "LucidaGrande.ttc",
			fontsize: 74,
			fontcolor: "#FFD700",
			x: "(w-text_w)/2",
			y: "h-330",
			box: 1,
			boxcolor: "#1a1a1a@0.91",
			boxborderw: 30
		}
	},

	"double_ice": {
		name: "Double Ice",
		category: "DOUBLE_BOX",
		best_for: ["frost", "winter", "frozen"],
		title: {
			fontfile: "HelveticaNeue.ttc",
			fontsize: 81,
			fontcolor: "#00DDFF",
			x: "(w-text_w)/2",
			y: 209,
			box: 1,
			boxcolor: "#00003a@0.92",
			boxborderw: 30
		},
		sub: {
			fontfile: "PTSans.ttc",
			fontsize: 72,
			fontcolor: "#B0E0E6",
			x: "(w-text_w)/2",
			y: "h-330",
			box: 1,
			boxcolor: "#1a1a2e@0.91",
			boxborderw: 28
		}
	},

	"double_purple": {
		name: "Double Purple",
		category: "DOUBLE_BOX",
		best_for: ["magic", "fantasy", "mystical"],
		title: {
			fontfile: "Palatino.ttc",
			fontsize: 82,
			fontcolor: "#AA55FF",
			x: "(w-text_w)/2",
			y: 207,
			box: 1,
			boxcolor: "#1a0a1a@0.93",
			boxborderw: 30
		},
		sub: {
			fontfile: "Charter.ttc",
			fontsize: 73,
			fontcolor: "#DA70D6",
			x: "(w-text_w)/2",
			y: "h-330",
			box: 1,
			boxcolor: "#2d1b52@0.91",
			boxborderw: 29
		}
	},

	"double_clean": {
		name: "Double Clean",
		category: "DOUBLE_BOX",
		best_for: ["tutorial", "howto", "guide"],
		title: {
			fontfile: "HelveticaNeue.ttc",
			fontsize: 78,
			fontcolor: "#212121",
			x: "(w-text_w)/2",
			y: 214,
			box: 1,
			boxcolor: "white@0.94",
			boxborderw: 30
		},
		sub: {
			fontfile: "PTSans.ttc",
			fontsize: 70,
			fontcolor: "#424242",
			x: "(w-text_w)/2",
			y: "h-330",
			box: 1,
			boxcolor: "#F5F5F5@0.92",
			boxborderw: 28
		}
	},

	// NO_BOX (10) - Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð¾Ð±Ð²Ð¾Ð´ÐºÐ° Ð±ÐµÐ· Ñ„Ð¾Ð½Ð°
	"outline_neon": {
		name: "Outline Neon",
		category: "NO_BOX",
		best_for: ["clean", "minimal", "modern"],
		title: {
			fontfile: "HelveticaNeue.ttc",
			fontsize: 88,
			fontcolor: "#00FFFF",
			x: "(w-text_w)/2",
			y: 188,
			box: 0
		},
		sub: {
			fontfile: "PTSans.ttc",
			fontsize: 78,
			fontcolor: "#FF00FF",
			x: "(w-text_w)/2",
			y: "h-330",
			box: 0
		}
	},

	"outline_fire": {
		name: "Outline Fire",
		category: "NO_BOX",
		best_for: ["action", "dynamic", "fast"],
		title: {
			fontfile: "HelveticaNeue.ttc",
			fontsize: 89,
			fontcolor: "#FF4400",
			x: "(w-text_w)/2",
			y: 185,
			box: 0
		},
		sub: {
			fontfile: "LucidaGrande.ttc",
			fontsize: 79,
			fontcolor: "#FFD700",
			x: "(w-text_w)/2",
			y: "h-330",
			box: 0
		}
	},

	"outline_classic": {
		name: "Outline Classic",
		category: "NO_BOX",
		best_for: ["meme", "viral", "classic"],
		title: {
			fontfile: "HelveticaNeue.ttc",
			fontsize: 91,
			fontcolor: "white",
			x: "(w-text_w)/2",
			y: 180,
			box: 0
		},
		sub: {
			fontfile: "PTSans.ttc",
			fontsize: 81,
			fontcolor: "white",
			x: "(w-text_w)/2",
			y: "h-330",
			box: 0
		}
	},

	"outline_rainbow": {
		name: "Outline Rainbow",
		category: "NO_BOX",
		best_for: ["fun", "colorful", "happy"],
		title: {
			fontfile: "MarkerFelt.ttc",
			fontsize: 88,
			fontcolor: "#FF69B4",
			x: "(w-text_w)/2",
			y: 188,
			box: 0
		},
		sub: {
			fontfile: "MarkerFelt.ttc",
			fontsize: 78,
			fontcolor: "#00FF88",
			x: "(w-text_w)/2",
			y: "h-330",
			box: 0
		}
	},

	"outline_gold": {
		name: "Outline Gold",
		category: "NO_BOX",
		best_for: ["epic", "legendary", "rare"],
		title: {
			fontfile: "Palatino.ttc",
			fontsize: 90,
			fontcolor: "#FFD700",
			x: "(w-text_w)/2",
			y: 183,
			box: 0
		},
		sub: {
			fontfile: "PTSans.ttc",
			fontsize: 80,
			fontcolor: "#FF8C00",
			x: "(w-text_w)/2",
			y: "h-330",
			box: 0
		}
	},

	"outline_toxic": {
		name: "Outline Toxic",
		category: "NO_BOX",
		best_for: ["poison", "acid", "bio"],
		title: {
			fontfile: "HelveticaNeue.ttc",
			fontsize: 89,
			fontcolor: "#39FF14",
			x: "(w-text_w)/2",
			y: 186,
			box: 0
		},
		sub: {
			fontfile: "LucidaGrande.ttc",
			fontsize: 79,
			fontcolor: "#ADFF2F",
			x: "(w-text_w)/2",
			y: "h-330",
			box: 0
		}
	},

	"outline_blood": {
		name: "Outline Blood",
		category: "NO_BOX",
		best_for: ["horror", "dark", "brutal"],
		title: {
			fontfile: "HelveticaNeue.ttc",
			fontsize: 90,
			fontcolor: "#DC143C",
			x: "(w-text_w)/2",
			y: 183,
			box: 0
		},
		sub: {
			fontfile: "PTSans.ttc",
			fontsize: 80,
			fontcolor: "#FF6347",
			x: "(w-text_w)/2",
			y: "h-330",
			box: 0
		}
	},

	"outline_ice": {
		name: "Outline Ice",
		category: "NO_BOX",
		best_for: ["frost", "cold", "frozen"],
		title: {
			fontfile: "HelveticaNeue.ttc",
			fontsize: 88,
			fontcolor: "#00DDFF",
			x: "(w-text_w)/2",
			y: 188,
			box: 0
		},
		sub: {
			fontfile: "PTSans.ttc",
			fontsize: 78,
			fontcolor: "#87CEEB",
			x: "(w-text_w)/2",
			y: "h-330",
			box: 0
		}
	},

	"outline_purple": {
		name: "Outline Purple",
		category: "NO_BOX",
		best_for: ["magic", "arcane", "spell"],
		title: {
			fontfile: "Palatino.ttc",
			fontsize: 89,
			fontcolor: "#AA55FF",
			x: "(w-text_w)/2",
			y: 186,
			box: 0
		},
		sub: {
			fontfile: "Charter.ttc",
			fontsize: 79,
			fontcolor: "#DA70D6",
			x: "(w-text_w)/2",
			y: "h-330",
			box: 0
		}
	},

	"outline_contrast": {
		name: "Outline Contrast",
		category: "NO_BOX",
		best_for: ["universal", "readable", "safe"],
		title: {
			fontfile: "HelveticaNeue.ttc",
			fontsize: 87,
			fontcolor: "white",
			x: "(w-text_w)/2",
			y: 190,
			box: 0
		},
		sub: {
			fontfile: "PTSans.ttc",
			fontsize: 77,
			fontcolor: "#FFFF00",
			x: "(w-text_w)/2",
			y: "h-330",
			box: 0
		}
	}
};

// =====================================================
// Ð¤Ð£ÐÐšÐ¦Ð˜Ð¯ Ð’Ð«Ð‘ÐžÐ Ð Ð¨ÐÐ‘Ð›ÐžÐÐ
// =====================================================
function selectTemplate(clientMeta) {
	let filteredTemplates = Object.entries(GAMING_TEMPLATES);

	// Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ Ð¿Ð¾ Ñ‚Ð¾Ñ‡Ð½Ð¾Ð¼Ñƒ Ð¸Ð¼ÐµÐ½Ð¸ ÑˆÐ°Ð±Ð»Ð¾Ð½Ð°
	if (clientMeta.template_name && GAMING_TEMPLATES[clientMeta.template_name]) {
		filteredTemplates = [[clientMeta.template_name, GAMING_TEMPLATES[clientMeta.template_name]]];
	}
	// Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ Ð¿Ð¾ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸
	else if (clientMeta.template_category) {
		filteredTemplates = filteredTemplates.filter(([key, tpl]) =>
			tpl.category === clientMeta.template_category
		);
	}

	// Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ Ð¿Ð¾ Ð¶Ð°Ð½Ñ€Ñƒ (ÐµÑÐ»Ð¸ ÐµÑÑ‚ÑŒ)
	if (clientMeta.template_genre && filteredTemplates.length > 1) {
		const genreFiltered = filteredTemplates.filter(([key, tpl]) =>
			tpl.best_for.includes(clientMeta.template_genre)
		);
		if (genreFiltered.length > 0) {
			filteredTemplates = genreFiltered;
		}
	}

	// Ð¡Ð»ÑƒÑ‡Ð°Ð¹Ð½Ñ‹Ð¹ Ð²Ñ‹Ð±Ð¾Ñ€ Ð¸Ð· Ð¾Ñ‚Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ñ…
	const [templateKey, tpl] = filteredTemplates[Math.floor(Math.random() * filteredTemplates.length)];
	return { templateKey, tpl, totalFiltered: filteredTemplates.length };
}

// =====================================================
// ÐŸÐ ÐÐ’Ð˜Ð›Ð¬ÐÐÐ¯ Ð¤Ð£ÐÐšÐ¦Ð˜Ð¯: Ñ€Ð°ÑÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ ÐºÐ°Ð¶Ð´Ñ‹Ð¹ ÑÑƒÐ±Ñ‚Ð¸Ñ‚Ñ€ Ð² text_item
// =====================================================
function createOperation(item, templateKey, tpl) {
	const data = item.json;
	const shorts = data.shorts || data;
	const clientMeta = shorts.client_meta || data.client_meta || {};
	const sourceUrl = data.source_video_url || shorts.source_video_url;

	// Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð¼Ð°ÑÑÐ¸Ð² text_items
	const textItems = [];

	// Item 1: Title (Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº Ð²ÑÐµÐ³Ð´Ð°)
	textItems.push({
		text: shorts.title,
		fontfile: tpl.title.fontfile,
		fontsize: tpl.title.fontsize,
		fontcolor: tpl.title.fontcolor,
		x: tpl.title.x,
		y: tpl.title.y,
		start: 0.0,
		end: 999,  // Ð”Ð¾ ÐºÐ¾Ð½Ñ†Ð° Ð²Ð¸Ð´ÐµÐ¾
		box: tpl.title.box,
		boxcolor: tpl.title.boxcolor || undefined,
		boxborderw: tpl.title.boxborderw || undefined
	});

	// Items 2+: ÐšÐÐ–Ð”Ð«Ð™ Ð¡Ð£Ð‘Ð¢Ð˜Ð¢Ð  - Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ text_item Ñ Ð¾Ð´Ð¸Ð½Ð°ÐºÐ¾Ð²Ñ‹Ð¼Ð¸ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð°Ð¼Ð¸
	// Ð½Ð¾ Ñ€Ð°Ð·Ð½Ñ‹Ð¼Ð¸ Ñ‚ÐµÐºÑÑ‚Ð¾Ð¼ Ð¸ Ð²Ñ€ÐµÐ¼ÐµÐ½ÐµÐ¼
	if (shorts.subtitles && shorts.subtitles.length > 0) {
		shorts.subtitles.forEach((subtitleObj) => {
			// ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÐ¼ Ð¾Ð±Ð° Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð°: Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð¹ Ñ‚ÐµÐºÑÑ‚ Ð¸Ð»Ð¸ Ð¾Ð±ÑŠÐµÐºÑ‚ Ñ timing
			const subtitleText = subtitleObj.text || subtitleObj;
			const startTime = subtitleObj.start !== undefined ? subtitleObj.start : 0;
			const endTime = subtitleObj.end !== undefined ? subtitleObj.end : (startTime + 5);

			textItems.push({
				text: subtitleText,
				fontfile: tpl.sub.fontfile,
				fontsize: tpl.sub.fontsize,
				fontcolor: tpl.sub.fontcolor,
				x: tpl.sub.x,
				y: tpl.sub.y,
				start: startTime,
				end: endTime,
				box: tpl.sub.box,
				boxcolor: tpl.sub.boxcolor || undefined,
				boxborderw: tpl.sub.boxborderw || undefined
			});
		});
	}

	return {
		json: {
			video_url: sourceUrl,
			execution: "async",
			operations: [{
				type: "make_short",
				start_time: shorts.start,
				end_time: shorts.end,
				crop_mode: "letterbox",
				letterbox_config: {
					blur_radius: 20
				},
				text_items: textItems,  // âœ… ÐŸÐ»Ð¾ÑÐºÐ¸Ð¹ Ð¼Ð°ÑÑÐ¸Ð², ÐºÐ°Ð¶Ð´Ñ‹Ð¹ ÑÑƒÐ±Ñ‚Ð¸Ñ‚Ñ€ = Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ item
				generate_thumbnail: true,
				thumbnail_timestamp: 0.5
			}],
			client_meta: {
				...clientMeta,
				_template_key: templateKey,
				_template_name: tpl.name,
				_template_category: tpl.category,
				_template_genres: tpl.best_for,
				_templates_available: 0,
				_input_item_index: item.index
			}
		}
	};
}

// =====================================================
// Ð“Ð›ÐÐ’ÐÐÐ¯ Ð›ÐžÐ“Ð˜ÐšÐ
// =====================================================
const items = $input.all();
const results = items.map((item) => {
	const clientMeta = (item.json.shorts || item.json).client_meta || item.json.client_meta || {};
	const { templateKey, tpl, totalFiltered } = selectTemplate(clientMeta);
	const operation = createOperation(item, templateKey, tpl);

	operation.json.client_meta._templates_available = totalFiltered;

	return operation;
});

return results;
